# Do not edit this file by hand.  Changes may be lost as it was rendered from another bundle.
relations:
- - keystone
  - mysql
- - nova-cloud-controller
  - mysql
- - nova-cloud-controller
  - rabbitmq-server
- - nova-cloud-controller
  - glance
- - nova-cloud-controller
  - keystone
- - nova-compute-ppc64el
  - nova-cloud-controller
- - nova-compute-amd64
  - nova-cloud-controller
- - nova-compute-ppc64el
  - mysql
- - nova-compute-amd64
  - mysql
- - nova-compute-ppc64el
  - rabbitmq-server:amqp
- - nova-compute-amd64
  - rabbitmq-server:amqp
- - nova-compute-ppc64el
  - glance
- - nova-compute-amd64
  - glance
- - nova-compute-ppc64el
  - ceph
- - nova-compute-amd64
  - ceph
- - glance
  - mysql
- - glance
  - keystone
- - glance
  - ceph
- - glance
  - cinder
- - cinder
  - mysql
- - cinder
  - rabbitmq-server
- - cinder
  - nova-cloud-controller
- - cinder
  - keystone
- - cinder
  - cinder-ceph
- - cinder-ceph
  - ceph
- - neutron-gateway
  - nova-cloud-controller
- - openstack-dashboard
  - keystone
- - swift-proxy
  - keystone
- - swift-proxy
  - swift-storage-z1
- - swift-proxy
  - swift-storage-z2
- - swift-proxy
  - swift-storage-z3
- - ceilometer
  - keystone:identity-service
- - ceilometer
  - rabbitmq-server
- - ceilometer
  - mongodb
- - ceilometer-agent
  - nova-compute-ppc64el
- - ceilometer-agent
  - nova-compute-amd64
- - ceilometer-agent
  - ceilometer
- - heat
  - mysql
- - heat
  - keystone
- - heat
  - rabbitmq-server
- - ceph-osd:mon
  - ceph:osd
- - ntp:juju-info
  - nova-compute-ppc64el:juju-info
- - ntp:juju-info
  - nova-compute-amd64:juju-info
- - ntp:juju-info
  - neutron-gateway:juju-info
- - ntp:juju-info
  - ceph-osd:juju-info
- - neutron-gateway:amqp
  - rabbitmq-server
- - neutron-api
  - mysql
- - neutron-api
  - rabbitmq-server
- - neutron-api
  - nova-cloud-controller
- - neutron-api
  - neutron-openvswitch
- - neutron-api
  - keystone
- - neutron-api
  - neutron-gateway
- - neutron-openvswitch
  - nova-compute-ppc64el
- - neutron-openvswitch
  - nova-compute-amd64
- - neutron-openvswitch
  - rabbitmq-server
series: xenial
services:
  ceilometer:
    charm: cs:~openstack-charmers-next/xenial/ceilometer
    to:
    - lxc:swift-storage-z1=0
  ceilometer-agent:
    charm: cs:~openstack-charmers-next/xenial/ceilometer-agent
  ceph:
    charm: cs:~openstack-charmers-next/xenial/ceph
    num_units: 3
    options:
      fsid: 6547bd3e-1397-11e2-82e5-53567c8d32dc
      monitor-secret: AQCXrnZQwI7KGBAAiPofmKEXKxu5bUzoYLVkbQ==
      osd-devices: /dev/sdb /dev/sdc /dev/sdd /dev/sde /dev/sdf
      osd-reformat: 'yes'
    to:
    - nova-compute-amd64=0
    - nova-compute-amd64=1
    - nova-compute-amd64=2
  ceph-osd:
    charm: cs:~openstack-charmers-next/xenial/ceph-osd
    options:
      osd-devices: /dev/sdb /dev/sdc /dev/sdd /dev/sde /dev/sdf
      osd-reformat: 'yes'
    to:
    - '0'
  cinder:
    charm: cs:~openstack-charmers-next/xenial/cinder
    options:
      block-device: None
      glance-api-version: 2
    to:
    - lxc:swift-storage-z2=0
  cinder-ceph:
    charm: cs:~openstack-charmers-next/xenial/cinder-ceph
  glance:
    charm: cs:~openstack-charmers-next/xenial/glance
    to:
    - lxc:swift-storage-z1=0
  heat:
    charm: cs:~openstack-charmers-next/xenial/heat
    to:
    - lxc:swift-storage-z2=0
  juju-gui:
    charm: cs:trusty/juju-gui
    to:
    - lxc:swift-storage-z3=0
  keystone:
    charm: cs:~openstack-charmers-next/xenial/keystone
    options:
      admin-password: openstack
      admin-token: ubuntutesting
    to:
    - lxc:swift-storage-z1=0
  mongodb:
    charm: cs:trusty/mongodb
    to:
    - lxc:swift-storage-z3=0
  mysql:
    charm: cs:trusty/mysql
    options:
      dataset-size: 15%
      max-connections: 20000
    to:
    - lxc:0
  neutron-api:
    charm: cs:~openstack-charmers-next/xenial/neutron-api
    options:
      flat-network-providers: physnet1
      neutron-security-groups: true
    to:
    - lxc:swift-storage-z1=0
  neutron-gateway:
    charm: cs:~openstack-charmers-next/xenial/neutron-gateway
    options:
      bridge-mappings: physnet1:br-ex
      instance-mtu: 1300
    to:
    - '0'
  neutron-openvswitch:
    charm: cs:~openstack-charmers-next/xenial/neutron-openvswitch
  nova-cloud-controller:
    charm: cs:~openstack-charmers-next/xenial/nova-cloud-controller
    options:
      network-manager: Neutron
    to:
    - lxc:swift-storage-z3=0
  nova-compute-amd64:
    charm: cs:~openstack-charmers-next/xenial/nova-compute
    constraints: arch=amd64
    num_units: 3
    options:
      enable-live-migration: true
      enable-resize: true
      migration-auth-type: ssh
  nova-compute-ppc64el:
    charm: cs:~openstack-charmers-next/xenial/nova-compute
    constraints: arch=ppc64el
    num_units: 3
    options:
      enable-live-migration: true
      enable-resize: true
      migration-auth-type: ssh
  ntp:
    charm: cs:trusty/ntp
    num_units: 0
  openstack-dashboard:
    charm: cs:~openstack-charmers-next/xenial/openstack-dashboard
    to:
    - lxc:swift-storage-z2=0
  rabbitmq-server:
    charm: cs:~openstack-charmers-next/xenial/rabbitmq-server
    to:
    - lxc:0
  swift-proxy:
    charm: cs:~openstack-charmers-next/xenial/swift-proxy
    options:
      replicas: 3
      swift-hash: fdfef9d4-8b06-11e2-8ac0-531c923c8fae
      zone-assignment: manual
    to:
    - lxc:0
  swift-storage-z1:
    charm: cs:~openstack-charmers-next/xenial/swift-storage
    options:
      block-device: /dev/sdb /dev/sdc /dev/sdd /dev/sde
      overwrite: 'true'
      zone: 1
  swift-storage-z2:
    charm: cs:~openstack-charmers-next/xenial/swift-storage
    options:
      block-device: /dev/sdb /dev/sdc /dev/sdd /dev/sde
      overwrite: 'true'
      zone: 2
  swift-storage-z3:
    charm: cs:~openstack-charmers-next/xenial/swift-storage
    options:
      block-device: /dev/sdb /dev/sdc /dev/sdd /dev/sde
      overwrite: 'true'
      zone: 3
