# mediawikipress
# ==============
#
# A small test bundle for exercising juju, juju-deployer, lxc, or maas, on
# bare metal or overcloud deploy testing.
#
# This is for testing.  It is not recommended for production deployments.
#
# Unit 0 - Bootstrap + mysql(lxc) + juju gui(lxc)
# Unit 1 - mediawiki + wordpress(lxc)
#
# TODO(beisner): Add NFS?
#
#==============================================================================
mediawikipress:
  constraints: mem=4G arch=amd64
  series: trusty
  services:
    mediawiki:
      branch: lp:charms/trusty/mediawiki
      num_units: 1
      constraints: mem=4G arch=amd64
      options:
        debug: false
        name: NothingToSeeHere
        skin: vector
    mysql:
      branch: lp:charms/trusty/mysql
      num_units: 1
      options:
#        binlog-format: MIXED
        block-size: 2
        dataset-size: 50%
        flavor: distro
#        ha-bindiface: eth0
#        ha-mcastport: 5411
#        max-connections: -1
#        preferred-storage-engine: InnoDB
#        query-cache-size: -1
#        query-cache-type: 'OFF'
#        rbd-name: mysql1
        tuning-level: fast
#        vip_cidr: 24
#        vip_iface: eth0
      to:
      - lxc:0
    juju-gui:
      branch: lp:charms/juju-gui
      num_units: 1
      to:
      - lxc:0
    wordpress:
      branch: lp:charms/wordpress
      num_units: 1
      to:
      - lxc:1
  relations:
  - - mediawiki:db
    - mysql:db
  - - wordpress:db
    - mysql:db
trusty:
  inherits: mediawikipress
  series: trusty
utopic:
  inherits: mediawikipress
  series: utopic
vivid:
  inherits: mediawikipress
  series: vivid
