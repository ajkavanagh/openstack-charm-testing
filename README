OpenStack-Charm-Testing

about
======

This openstack-charm-testing (aka o-c-t) project contains reference
juju deployer bundles, post-deployment configuration scripts, and 
other templates for Ubuntu OpenStack charm testing.

For automated testing, the Ubuntu OpenStack CI engine (aka osci / uosci)
consumes the bundles and other templates provided herein.

OpenStack package and charm developers also perform manual testing
based on this collection of bundles and templates, as well as using
the next.yaml and default.yaml bundles as a baseline for edge cases and
special testing.

Generally, these configurations are tuned for virtual deployments,
ie. testing short-lived OpenStack overclouds on top of an OpenStack
undercloud.  Some pieces may be specific to Canonical Server Team's
internal dev cloud ('serverstack'), but can be easily modified for
bare metal or other environments.


deploy
======

juju-deployer --bootstrap -c default.yaml -d trusty-juno

targets exist for most combinations, e.g.:

   trusty-icehouse
   trusty-juno-proposed
   vivid-kilo


configure
=========

# serverstack
./configure

# dellstack
./configure-dellstack

These scripts:

a) For virtual (serverstack), adds an extra port to the neutron-gateway
   service for floating ip use

b) Configures appropriate external networking

c) Uploads some images - this need to be in ~/images

d) Creates some demo tenants

e) Writes a tempest configuration file and clones the tempest repository from upstream


test - tempest smoke
====================

 * Smoke tests include ~430 exercises, generally taking ~30 minutes to run.

cd tempest
git checkout stable/havana (or stable/grizzly)
sudo pip install -r requirements.txt
./run_tempest.sh -N --smoke

NOTES: 

 * Some failures are to be expected, depending on deployment environment (firewall, proxy
   restrictions, capacity, etc.).

 * As of 1/9/2014, tempest smoke failure norms on serverstack were:
    p-i-next: 5
    t-i-next: 5
    t-j-next: 6
    u-j-next: 6
    p-i: 6
    t-i: 5
    t-j: 4
    u-j: 8

test - tempest full
===================

 * Full tests include over 2000 exercises and may take several
   hours to execute.

cd tempest
git checkout stable/havana (or stable/grizzly)
sudo pip install -r requirements.txt
./run_tempest.sh -N -t

    
destroy
=======

juju destroy-environment <your-enviro-name>
